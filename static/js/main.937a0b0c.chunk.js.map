{"version":3,"sources":["components/Models/Person.jsx","App.jsx","reportWebVitals.js","index.jsx"],"names":["Plane","props","usePlane","rotation","Math","PI","mesh","ref","args","color","Person","panel","personGuiPanel","blendDuration","useState","direction","THREE","frontVector","sideVector","useEffect","GUI","addFolder","keys","KeyW","KeyS","KeyA","KeyD","Space","moveFieldByKey","key","Model","gltf","useGLTF","useAnimations","animations","actions","mixer","names","clips","forward","backward","left","right","jump","movement","setMovement","handleKeyDown","e","m","code","handleKeyUp","document","addEventListener","removeEventListener","usePlayerControls","camera","useRef","useThree","velocity","useSphere","mass","position","type","api","set","Number","subVectors","normalize","multiplyScalar","idle","reset","fadeOut","walk","fadeIn","play","lookAt","subscribe","v","current","useFrame","getWorldPosition","z","x","y","add","min","max","step","name","object","scene","dispose","dpr","fov","style","height","width","Stats","showPanel","className","fallback","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"0TAiLA,SAASA,EAAMC,GAEb,MAAeC,aAAS,+BAASC,SAAU,EAAEC,KAAKC,GAAK,EAAG,EAAG,IAAOJ,MAA7DK,EAAP,oBAEA,OACE,+CAAMC,IAAKD,GAAUL,GAArB,IAA4BE,SAAU,EAAEC,KAAKC,GAAK,EAAG,EAAG,GAAxD,UACE,qCAAqBG,KAAM,CAAC,IAAK,OACjC,sCAAsBC,MAAM,eAKnBC,MAxKA,WACb,IACIC,EAAOC,EADLC,EAAgB,IAEtB,EAA0CC,mBAAS,QAAnD,mBAGMC,GAHN,UAGkB,IAAIC,WAChBC,EAAc,IAAID,UAClBE,EAAa,IAAIF,UACN,IAAIA,UACP,IAAIA,UAElBG,qBAAU,WACRR,EAAQ,IAAIS,IACZR,EAAiBD,EAAMU,UAAU,UAChBV,EAAMU,UAAU,YAChC,IAEH,IAAMC,EAAO,CACXC,KAAM,UACNC,KAAM,WACNC,KAAM,OACNC,KAAM,QACNC,MAAO,QAEHC,EAAiB,SAACC,GAAD,OAASP,EAAKO,IA4B/BC,EAAQ,WACZ,IAAMC,EAAOC,YAAQ,kBAAmB,eACxC,EAA8CC,YAAcF,EAAKG,YAAzD3B,EAAR,EAAQA,IAAmB4B,GAA3B,EAAaC,MAAb,EAAoBC,MAApB,EAA2BF,SAC3B,GADA,EAAoCG,MA5BZ,WACxB,MAAgCxB,mBAAS,CACvCyB,SAAS,EACTC,UAAU,EACVC,MAAM,EACNC,OAAO,EACPC,MAAM,IALR,mBAAOC,EAAP,KAAiBC,EAAjB,KAqBA,OAdA1B,qBAAU,WACR,IAAM2B,EAAgB,SAACC,GACrBF,GAAY,SAACG,GAAD,mBAAC,eAAYA,GAAb,kBAAiBpB,EAAemB,EAAEE,OAAQ,QAElDC,EAAc,SAACH,GACnBF,GAAY,SAACG,GAAD,mBAAC,eAAYA,GAAb,kBAAiBpB,EAAemB,EAAEE,OAAQ,QAIxD,OAFAE,SAASC,iBAAiB,UAAWN,GACrCK,SAASC,iBAAiB,QAASF,GAC5B,WACLC,SAASE,oBAAoB,UAAWP,GACxCK,SAASE,oBAAoB,QAASH,MAEvC,IACIN,EAO0CU,IAAzCf,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,SAAUC,EAA3B,EAA2BA,KAAMC,EAAjC,EAAiCA,MAEzBa,GAFR,EAAwCZ,KAChBa,iBAAO,MACZC,cAAXF,QACFG,EAAWF,iBAAO,CAAC,EAAG,EAAG,IAE/B,EAAoBG,aAAU,iBAAO,CACnCC,KAAM,EACNC,SAAU,CAAC,EAAG,EAAG,GACjBC,KAAM,cAHR,mBAAOxD,EAAP,KAAayD,EAAb,KAiEA,OA3DA5C,qBAAU,WAYR,OAXAF,EAAY+C,IAAI,EAAG,EAAGC,OAAO1B,GAAW0B,OAAOzB,IAC/CtB,EAAW8C,IAAIC,OAAOvB,GAASuB,OAAOxB,GAAO,EAAG,GAChD1B,EACGmD,WAAWjD,EAAaC,GACxBiD,YACAC,eApEO,IAsEN7B,GAAWG,GAASD,KACtBN,EAAQkC,KAAKC,QAAQC,QAAQ1D,GAC7BsB,EAAQqC,KAAKF,QAAQG,OAAO5D,GAAe6D,QAEtC,YACDnC,GAAWG,GAASD,KACtBN,EAAQkC,KAAKC,QAAQG,OAAO5D,GAAe6D,OAC3CvC,EAAQqC,KAAKF,QAAQC,QAAQ1D,OAGhC,CAAC0B,EAASC,EAAUE,EAAOD,IAE9BtB,qBAAU,WACRgB,EAAQkC,KAAKK,OACbnB,EAAOM,SAASG,IAAI,EAAG,MAAO,MAC9BT,EAAOoB,OAAO,EAAG,KAAM,GACvBZ,EAAIL,SAASkB,WAAU,SAACC,GAAD,OAAQnB,EAASoB,QAAUD,OACjD,IAEHE,aAAS,WACPzE,EAAKwE,QAAQE,iBAAiBzB,EAAOM,UACrCvD,EAAKwE,QAAQE,iBAAiBzE,EAAIuE,QAAQjB,UAC1CN,EAAOM,SAASoB,GAAK,EACrBlB,EAAIL,SAASM,IAAIjD,EAAUmE,EAAGxB,EAASoB,QAAQ,GAAI/D,EAAUkE,GAC7D1E,EAAIuE,QAAQjB,SAASsB,GAAK,KAG5BhE,qBAAU,WACJP,GAAkBA,IACpBA,EACGwE,IAAI7E,EAAIuE,QAAQjB,SAAU,KAC1BwB,IAAI,GACJC,IAAI,GACJC,KAAK,IACLC,KAAK,KACR5E,EACGwE,IAAI7E,EAAIuE,QAAQjB,SAAU,KAC1BwB,IAAI,GACJC,IAAI,GACJC,KAAK,IACLC,KAAK,KACR5E,EACGwE,IAAI7E,EAAIuE,QAAQjB,SAAU,KAC1BwB,IAAI,GACJC,IAAI,GACJC,KAAK,KACLC,KAAK,KACR5E,EAAewE,IAAI7E,EAAIuE,QAAS,cAEjC,IAGD,iCACE,sBAAMvE,IAAKD,IACX,2BAAWC,IAAKA,EAAKkF,OAAQ1D,EAAK2D,MAAOC,QAAS,WAKxD,OACE,eAAC,IAAD,CACEC,IAAK,CAAC,EAAG,GACTrC,OAAQ,CAAEsC,IAAK,IACfC,MAAO,CAAEC,OAAQ,QAASC,MAAO,QAHnC,UAKE,cAACC,EAAA,EAAD,CACEC,UAAW,EACXC,UAAU,UAEZ,iCACA,4BAAY3F,KAAM,CAAC,OACnB,eAAC,IAAD,WACE,cAACR,EAAD,IACA,cAAC,WAAD,CAAUoG,SAAU,KAApB,SACE,cAACtE,EAAD,aC/JKuE,MARf,WACE,OACE,qBAAKF,UAAU,MAAf,SACE,cAAC,EAAD,O,QCMSG,EAVS,SAACC,GACnBA,GAAeA,aAAuBC,WACxCC,YAAOF,GACPG,YAAOH,GACPI,YAAOJ,GACPK,YAAOL,GACPM,YAAQN,KCFZO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF7D,SAAS8D,eAAe,SAM1BX,M","file":"static/js/main.937a0b0c.chunk.js","sourcesContent":["/* eslint-disable */\nimport React, { Suspense, useState, useEffect, useRef } from 'react'\nimport * as THREE from 'three'\nimport { Canvas, useFrame, useThree } from '@react-three/fiber'\nimport {\n  Physics,\n  useSphere,\n  usePlane,\n  useBox,\n  Debug,\n  useCylinder,\n} from '@react-three/cannon'\nimport {\n  useGLTF,\n  OrbitControls,\n  useAnimations,\n  PerspectiveCamera,\n  Stats,\n} from '@react-three/drei'\nimport { GUI } from 'dat.gui'\n\nconst Person = () => {\n  const blendDuration = 0.15\n  let panel, personGuiPanel, cameraGuiPanel\n  const [currentAction, setCurrentAction] = useState('walk')\n\n  const SPEED = 5\n  const direction = new THREE.Vector3()\n  const frontVector = new THREE.Vector3()\n  const sideVector = new THREE.Vector3()\n  const rotation = new THREE.Vector3()\n  const speed = new THREE.Vector3()\n\n  useEffect(() => {\n    panel = new GUI()\n    personGuiPanel = panel.addFolder('Person')\n    cameraGuiPanel = panel.addFolder('Camera')\n  }, [])\n\n  const keys = {\n    KeyW: 'forward',\n    KeyS: 'backward',\n    KeyA: 'left',\n    KeyD: 'right',\n    Space: 'jump',\n  }\n  const moveFieldByKey = (key) => keys[key]\n\n  const usePlayerControls = () => {\n    const [movement, setMovement] = useState({\n      forward: false,\n      backward: false,\n      left: false,\n      right: false,\n      jump: false,\n    })\n    useEffect(() => {\n      const handleKeyDown = (e) => {\n        setMovement((m) => ({ ...m, [moveFieldByKey(e.code)]: true }))\n      }\n      const handleKeyUp = (e) => {\n        setMovement((m) => ({ ...m, [moveFieldByKey(e.code)]: false }))\n      }\n      document.addEventListener('keydown', handleKeyDown)\n      document.addEventListener('keyup', handleKeyUp)\n      return () => {\n        document.removeEventListener('keydown', handleKeyDown)\n        document.removeEventListener('keyup', handleKeyUp)\n      }\n    }, [])\n    return movement\n  }\n\n  // Importing model\n  const Model = () => {\n    const gltf = useGLTF('./libs/Xbot.glb', '/draco-gltf')\n    const { ref, mixer, names, actions, clips } = useAnimations(gltf.animations)\n    const { forward, backward, left, right, jump } = usePlayerControls()\n    const personCameraRef = useRef(null)\n    const { camera } = useThree()\n    const velocity = useRef([0, 0, 0])\n\n    const [mesh, api] = useSphere(() => ({\n      mass: 1,\n      position: [0, 1, 0],\n      type: 'Dynamic',\n    }))\n\n    useEffect(() => {\n      frontVector.set(0, 0, Number(forward) - Number(backward))\n      sideVector.set(Number(right) - Number(left), 0, 0)\n      direction\n        .subVectors(frontVector, sideVector)\n        .normalize()\n        .multiplyScalar(SPEED)\n\n      if (forward || right || left) {\n        actions.idle.reset().fadeOut(blendDuration)\n        actions.walk.reset().fadeIn(blendDuration).play()\n      }\n      return () => {\n        if (forward || right || left) {\n          actions.idle.reset().fadeIn(blendDuration).play()\n          actions.walk.reset().fadeOut(blendDuration)\n        }\n      }\n    }, [forward, backward, right, left])\n\n    useEffect(() => {\n      actions.idle.play()\n      camera.position.set(0, 1.45, -4.25)\n      camera.lookAt(0, 1.45, 0)\n      api.velocity.subscribe((v) => (velocity.current = v))\n    }, [])\n\n    useFrame(() => {\n      mesh.current.getWorldPosition(camera.position)\n      mesh.current.getWorldPosition(ref.current.position)\n      camera.position.z -= 4\n      api.velocity.set(direction.x, velocity.current[1], direction.z)\n      ref.current.position.y -= 1\n    })\n\n    useEffect(() => {\n      if (personGuiPanel && personGuiPanel) {\n        personGuiPanel\n          .add(ref.current.position, 'x')\n          .min(0)\n          .max(5)\n          .step(0.1)\n          .name('x')\n        personGuiPanel\n          .add(ref.current.position, 'y')\n          .min(0)\n          .max(5)\n          .step(0.1)\n          .name('y')\n        personGuiPanel\n          .add(ref.current.position, 'z')\n          .min(0)\n          .max(5)\n          .step(0.05)\n          .name('z')\n        personGuiPanel.add(ref.current, 'visible')\n      }\n    }, [])\n\n    return (\n      <mesh>\n        <mesh ref={mesh}></mesh>\n        <primitive ref={ref} object={gltf.scene} dispose={null} />\n      </mesh>\n    )\n  }\n\n  return (\n    <Canvas\n      dpr={[1, 2]}\n      camera={{ fov: 45 }}\n      style={{ height: '100vh', width: '100%' }}\n    >\n      <Stats\n        showPanel={0} // Start-up panel (default=0)\n        className=\"stats\" // Optional className to add to the stats container dom element\n      />\n      <ambientLight />\n      <axesHelper args={[100]} />\n      <Physics>\n        <Plane />\n        <Suspense fallback={null}>\n          <Model />\n        </Suspense>\n      </Physics>\n    </Canvas>\n  )\n}\n\nfunction Plane(props) {\n  // This reference will give us direct access to the mesh\n  const [mesh] = usePlane(() => ({ rotation: [-Math.PI / 2, 0, 0], ...props }))\n  // console.log(mesh.current.x)\n  return (\n    <mesh ref={mesh} {...props} rotation={[-Math.PI / 2, 0, 0]}>\n      <planeBufferGeometry args={[100, 100]} />\n      <meshStandardMaterial color=\"orange\" />\n    </mesh>\n  )\n}\n\nexport default Person\n","import './App.css'\nimport Person from './components/Models/Person'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Person />\n    </div>\n  )\n}\n\nexport default App\n","import { getLCP, getFID, getCLS, getFCP, getTTFB } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    getCLS(onPerfEntry)\n    getFID(onPerfEntry)\n    getFCP(onPerfEntry)\n    getLCP(onPerfEntry)\n    getTTFB(onPerfEntry)\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}